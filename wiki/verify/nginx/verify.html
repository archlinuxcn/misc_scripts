<!DOCTYPE html>
<html>
<head>
<title>安全检查</title>
<meta charset=utf-8>
<script src='https://www.recaptcha.net/recaptcha/api.js'></script>
<script type="text/javascript">
async function check_response(token) {
  const r = await fetch('/__verify', {
    body: token,
    method: 'POST',
  })
  const j = await r.json()
  if(j.status == 'ok') {
    let params = new URL(document.location).searchParams
    location.replace(params.get('url') || '/')
  } else {
    location.reload()
  }
}
</script>
</head>
<body>
<h1>安全检查</h1>
<p>为了本站能够可持续提供服务，访问前请先完成以下安全检查：</p>
<div class="g-recaptcha" data-sitekey="6LcvatUpAAAAAITQvPIk8zsJgY3YccveOEYMgPyr"
        data-callback="check_response"></div>
</body>
</html>
